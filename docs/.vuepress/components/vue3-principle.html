<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
    // 源数据
    let person = {
        name: '张三',
        age: 20
    };
    
    // 模拟Vue2实现的响应式
    // let p = {};
    // Object.defineProperty(p, 'name', {
    //     configurable: true,
    //     get() {
    //         return person.name;
    //     },
    //     set(value) {  // 修改name时调用
    //         console.log('调用了修改name属性');
    //         person.name = value;
    //     }
    // });
    
    // 模拟Vue3实现的响应式
    // 捕获响应式
    const p = new Proxy(person, {
        // target是传入的源数据  propName是属性
        get(target, propName) {
            return target[propName];
        },
        // 修改或添加属性调用
        set(target, propName, value) {
            console.log(`修改了p身上的${propName}属性`);
            target[propName] = value;
        },
        deleteProperty(target, propName) {
            console.log(`删除了p身上的${propName}属性`);
            return delete target[propName];
        }
    });

</script>

</body>
</html>